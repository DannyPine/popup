<!DOCTYPE html> <title>Basic Visual Test</title>

<style>
  .reference {
    position: absolute;
    background-color: red;
  }

  #reference1 {
    top: 150px;
    left: 150px;
    width: 200px;
    height: 200px;
  }

  #reference2 {
    top: 150px;
    left: 500px;
    width: 200px;
    height: 200px;
  }

  .popper {
    width: 100px;
    height: 100px;
    background-color: rebeccapurple;
    box-shadow: inset 0 0 0 1px black;
  }
</style>

<div class="reference" id="reference1">Reference Box</div>
<div class="popper" id="popper1-1">Popper Box</div>
<div class="popper" id="popper1-2">Popper Box</div>
<div class="popper" id="popper1-3">Popper Box</div>
<div class="popper" id="popper1-4">Popper Box</div>

<div class="reference" id="reference2">Reference Box</div>
<div class="popper" id="popper2-1">Popper Box</div>
<div class="popper" id="popper2-2">Popper Box</div>
<div class="popper" id="popper2-3">Popper Box</div>
<div class="popper" id="popper2-4">Popper Box</div>

<script type="module">
  import {
    computePosition,
    offset,
    listScrollParents,
  } from '../../dist/index.js';

  ['top', 'right', 'bottom', 'left'].forEach((placement, n) => {
    async function update() {
      const popper1 = document.querySelector(`#popper1-${n + 1}`);
      const { x: x1, y: y1 } = await computePosition(reference1, popper1, {
        placement,
        modifiers: [offset({ mainAxis: 50, crossAxis: 50 })],
      });

      Object.assign(popper1.style, {
        position: 'absolute',
        left: `${x1}px`,
        top: `${y1}px`,
      });

      const popper2 = document.querySelector(`#popper2-${n + 1}`);
      const { x: x2, y: y2 } = await computePosition(reference2, popper2, {
        placement,
        modifiers: [offset({ mainAxis: -50, crossAxis: -50 })],
      });

      Object.assign(popper2.style, {
        position: 'absolute',
        left: `${x2}px`,
        top: `${y2}px`,
      });
    }

    update();
  });
</script>
